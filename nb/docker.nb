(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     13406,        329]
NotebookOptionsPosition[     10632,        268]
NotebookOutlinePosition[     11081,        286]
CellTagsIndexPosition[     11038,        283]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["\:6e05\:7a7a\:6240\:6709\:7684\:65e0\:7528\:5bb9\:5668", "Subsection",
 CellChangeTimes->{{3.7988589557622128`*^9, 
  3.7988589637102127`*^9}},ExpressionUUID->"b0a05e52-7bfb-478a-b02e-\
445384c2961d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{"StringSplit", "[", "\"\<docker.exe container prune -f\>\"", "]"}],
    ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.798858941868696*^9, 3.798858953020213*^9}, {
   3.7988589996102123`*^9, 3.7988590492427497`*^9}, 3.7988591167967687`*^9, 
   3.798859211451966*^9, {3.7988592423989663`*^9, 3.798859266436694*^9}},
 CellLabel->"In[2]:=",ExpressionUUID->"714ed0d7-e6cf-41aa-b679-1921afc0c835"],

Cell[BoxData["\<\"Deleted \
Containers:\\\
n8315877087b66cdc8e429fea8e540e000e4af4ce18f08414c83da9f88a2f5fc0\\\
n5a0228a7689388c53212553c317fa09493fa26358aa0994b61789aa59a6896b5\\\
n0defb4851bcf69ed2b9c34e6cd6b900050c77d52e2f6beb4523269cdaaae2ea3\\\
n3ed40951ef9d5f17b30d7cbdef255ea7b1186959829def6b597a189341432634\\\
ne8af3be8eed23ef62b3747343ed07d6ba4265597196a99a46e7a4866a15ad065\\\
nc3bc4c81417203bf564e8659be8eec1350784690b03b25724b5560a2c7e66df5\\\
nec1faf0d10c084690e24a491b9c8a2046665381418a7775ad2546879ebe69efd\\\
n04621f9ca87e1dc151652c80173c45658a19c92b1523626a6ed051447a9c4707\\\
nceebe10b30d01e7876e23f2539bf94520902b2217402456c4e06ff75d2c02fa2\\\
n8cc8177345d41c8805b48f2a1627bd40c1291500d2580474e056149879176b50\\\
n48735aa4d45b3b8b756f3397413be7ab3c3b7f983d0d1602edc8d6bcab94e20b\\\
nba40eefbe5eeba23fbf31cfa34828384379c238196a4d85c9bbedaaea7336b4a\\\
nd8280efb8b7ccba72779583e577ea78eeacbad0cb6c852d23f161c0579a1e051\\\
nb1a0d985acd13c922b125c0561a3d4524800e9c209b333bd548d908dbf39cd36\\n\\nTotal \
reclaimed space: 681.5kB\\n\"\>"], "Output",
 CellChangeTimes->{3.7988592881296816`*^9, 3.7989326805682983`*^9, 
  3.8005096702089458`*^9},
 CellLabel->"Out[2]=",ExpressionUUID->"b81667bd-afbe-4043-9ac3-a7baa1158780"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\:5217\:51fa\:6240\:6709\:7684\:670d\:52a1\:6808", "Subsection",
 CellChangeTimes->{{3.7988593100846677`*^9, 
  3.7988593340588293`*^9}},ExpressionUUID->"108cdecb-8ac8-4ee6-bb07-\
62f384495b59"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{"StringSplit", "[", "\"\<docker.exe stack ls\>\"", "]"}], ",", 
   "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.798858941868696*^9, 3.798858953020213*^9}, {
   3.7988589996102123`*^9, 3.7988590492427497`*^9}, 3.7988591167967687`*^9, 
   3.798859211451966*^9, {3.7988592423989663`*^9, 3.7988592970076666`*^9}},
 CellLabel->"In[20]:=",ExpressionUUID->"91fb161b-5dce-406a-aecd-ae3d80998eab"],

Cell[BoxData["\<\"NAME                SERVICES            ORCHESTRATOR\\nbb   \
               1                   Swarm\\nmn                  1              \
     Swarm\\nmongo               2                   Swarm\\nmysql            \
   1                   Swarm\\nnexus               1                   \
Swarm\\nrabbitmq            1                   Swarm\\nredis               1 \
                  Swarm\\n\"\>"], "Output",
 CellChangeTimes->{
  3.7988589664532366`*^9, 3.7988590057152424`*^9, 3.7988590496747503`*^9, 
   3.798859117682764*^9, 3.798859214688966*^9, {3.7988592676526957`*^9, 
   3.798859298032668*^9}, 3.798859338173833*^9, 3.798941196283867*^9, {
   3.7989431634975815`*^9, 3.7989431684175844`*^9}},
 CellLabel->"Out[20]=",ExpressionUUID->"ad3a72df-8087-446c-98d8-b08bac0a33f3"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["mongo", "Subsection",
 CellChangeTimes->{{3.7988593100846677`*^9, 3.7988593340588293`*^9}, {
  3.7989431134988346`*^9, 3.798943152809583*^9}, {3.798943632698332*^9, 
  3.7989436328593316`*^9}},ExpressionUUID->"ed662794-d15b-4021-b8ac-\
3098aa727253"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{"StringSplit", "[", "\"\<docker.exe stack rm mongo\>\"", "]"}], 
   ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellLabel->"In[29]:=",ExpressionUUID->"d7e8c893-1654-47c0-b548-8e392592ce58"],

Cell[BoxData["\<\"Removing service mongo_express\\nRemoving service \
mongo_mongo\\n\"\>"], "Output",
 CellChangeTimes->{3.7989436451968427`*^9},
 CellLabel->"Out[29]=",ExpressionUUID->"725e8c6e-e2d9-46a7-a5d2-58f83afa3b0d"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{
   "StringSplit", "[", "\"\<docker.exe volume rm mongo-config\>\"", "]"}], 
   ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7989433263959637`*^9, 3.7989433286780005`*^9}, {
  3.798943383130349*^9, 3.7989434419578934`*^9}},
 CellLabel->"In[24]:=",ExpressionUUID->"d05ecc98-475c-48cf-ab86-98834791c2c9"],

Cell[BoxData["\<\"mongo-config\\n\"\>"], "Output",
 CellChangeTimes->{3.798943456172858*^9},
 CellLabel->"Out[24]=",ExpressionUUID->"bff9ba76-f9aa-4399-9fb8-4495b1e9352e"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{"StringSplit", "[", "\"\<docker.exe volume rm mongo-db\>\"", "]"}],
    ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7989434516738844`*^9, 3.7989434519019003`*^9}},
 CellLabel->"In[25]:=",ExpressionUUID->"2cd38d4b-9238-4ccb-b79e-cf64a09bb8e7"],

Cell[BoxData["\<\"mongo-db\\n\"\>"], "Output",
 CellChangeTimes->{3.7989434591491585`*^9},
 CellLabel->"Out[25]=",ExpressionUUID->"33890a0d-c8ed-4044-8057-f25cd4333709"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{
   "StringSplit", "[", "\"\<docker.exe volume create mongo-config\>\"", "]"}],
    ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7989434708501596`*^9, 3.7989434716111593`*^9}},
 CellLabel->"In[26]:=",ExpressionUUID->"87788ee5-ad2e-45db-870c-a8fbef8a1783"],

Cell[BoxData["\<\"mongo-config\\n\"\>"], "Output",
 CellChangeTimes->{3.79894347821716*^9},
 CellLabel->"Out[26]=",ExpressionUUID->"9ddeb49c-81e8-4213-b7ea-70d62da4abb3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{
   "StringSplit", "[", "\"\<docker.exe volume create mongo-db\>\"", "]"}], 
   ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7989434729541597`*^9, 3.798943475172159*^9}},
 CellLabel->"In[27]:=",ExpressionUUID->"be940f90-2a5b-4129-b47a-0aaee96556db"],

Cell[BoxData["\<\"mongo-db\\n\"\>"], "Output",
 CellChangeTimes->{3.7989434801824446`*^9},
 CellLabel->"Out[27]=",ExpressionUUID->"86ed9995-a518-46bb-9e8c-b8f4cfbc434c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{
   "StringSplit", "[", 
    "\"\<docker.exe stack deploy -c C:\\\\docker\\\\mongo.yml mongo\>\"", 
    "]"}], ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.798858941868696*^9, 3.798858953020213*^9}, {
   3.7988589996102123`*^9, 3.7988590492427497`*^9}, 3.7988591167967687`*^9, 
   3.798859211451966*^9, {3.7988592423989663`*^9, 3.7988592970076666`*^9}, {
   3.798943128801836*^9, 3.798943133483836*^9}, {3.798943177533121*^9, 
   3.79894317955834*^9}, {3.798943346666539*^9, 3.798943377091362*^9}},
 CellLabel->"In[30]:=",ExpressionUUID->"70ec78ce-9c85-426e-873c-c7ef4abee7c9"],

Cell[BoxData["\<\"Creating service mongo_mongo\\n\"\>"], "Output",
 CellChangeTimes->{
  3.7988589664532366`*^9, 3.7988590057152424`*^9, 3.7988590496747503`*^9, 
   3.798859117682764*^9, 3.798859214688966*^9, {3.7988592676526957`*^9, 
   3.798859298032668*^9}, 3.798859338173833*^9, 3.798941196283867*^9, 
   3.7989431348308353`*^9, 3.7989435064934444`*^9, 3.798943692550217*^9},
 CellLabel->"Out[30]=",ExpressionUUID->"7523f11c-50cd-4d14-a226-826a28daab22"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Run", "[", 
  RowBox[{"\"\<docker.exe exec -it \>\"", "<>", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"RunProcess", "[", 
           RowBox[{
            RowBox[{"StringSplit", "[", "\"\<docker.exe ps\>\"", "]"}], ",", 
            "\"\<StandardOutput\>\""}], "]"}], "//", 
          RowBox[{
           RowBox[{"StringCases", "[", 
            RowBox[{"#", ",", 
             RowBox[{
              RowBox[{"\"\<\\n\>\"", "~~", "x__", "~~", "\"\<mongo:\>\""}], 
              "\[RuleDelayed]", 
              RowBox[{"StringTrim", "[", "x", "]"}]}]}], "]"}], "&"}]}], "//",
          "First"}], "//", 
        RowBox[{
         RowBox[{"RunProcess", "[", 
          RowBox[{
           RowBox[{"StringSplit", "[", 
            RowBox[{"\"\<docker.exe inspect \>\"", "<>", "#"}], "]"}], ",", 
           "\"\<StandardOutput\>\""}], "]"}], "&"}]}], "//", 
       RowBox[{
        RowBox[{"ImportString", "[", 
         RowBox[{"#", ",", "\"\<RawJSON\>\""}], "]"}], "&"}]}], "//", 
      RowBox[{
       RowBox[{"Lookup", "[", 
        RowBox[{"#", ",", "\"\<Id\>\""}], "]"}], "&"}]}], "//", "First"}], 
    ")"}], "<>", "\"\< mongo -u root -p civic\>\""}], "\[IndentingNewLine]", 
  "]"}]], "Input",
 CellChangeTimes->{{3.798945838024805*^9, 3.7989458531097803`*^9}, {
  3.79894640578961*^9, 3.7989464513884325`*^9}, {3.7989464837994313`*^9, 
  3.7989465010454893`*^9}},
 CellLabel->"In[98]:=",ExpressionUUID->"28e772b4-5760-47c4-b1f4-7e74d36f01cb"],

Cell[BoxData[
 RowBox[{"-", "1073741510"}]], "Output",
 CellChangeTimes->{
  3.7989458649897804`*^9, 3.7989464090075912`*^9, 3.798946454917431*^9, {
   3.79894649246143*^9, 3.7989464932874904`*^9}, {3.798948095786974*^9, 
   3.798948107071488*^9}},
 CellLabel->"Out[98]=",ExpressionUUID->"bd9a34a3-2b6e-4c17-905a-f654f8bccab2"]
}, Open  ]],

Cell["db.createUser({user:\[CloseCurlyDoubleQuote]xxl\[CloseCurlyDoubleQuote],\
pwd:\[CloseCurlyDoubleQuote]civic\[CloseCurlyDoubleQuote],roles:[\
\[OpenCurlyDoubleQuote]readWrite\[CloseCurlyDoubleQuote]]})", "Text",
 CellChangeTimes->{{3.798947993620998*^9, 
  3.798948077382001*^9}},ExpressionUUID->"0442d02d-cf60-42c7-8d28-\
4e441f60720e"]
}, Open  ]]
},
WindowSize->{759, 618},
WindowMargins->{{Automatic, 37.200000000000045`}, {
  Automatic, 18.599999999999998`}},
FrontEndVersion->"12.1 for Microsoft Windows (64-bit) (2020\:5e743\:670814\
\:65e5)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"f16f94ae-af27-45ac-ac39-eecc4882c40f"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 206, 3, 54, "Subsection",ExpressionUUID->"b0a05e52-7bfb-478a-b02e-445384c2961d"],
Cell[CellGroupData[{
Cell[811, 29, 482, 8, 44, "Input",ExpressionUUID->"714ed0d7-e6cf-41aa-b679-1921afc0c835"],
Cell[1296, 39, 1236, 19, 389, "Output",ExpressionUUID->"b81667bd-afbe-4043-9ac3-a7baa1158780"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[2581, 64, 200, 3, 54, "Subsection",ExpressionUUID->"108cdecb-8ac8-4ee6-bb07-62f384495b59"],
Cell[CellGroupData[{
Cell[2806, 71, 475, 8, 44, "Input",ExpressionUUID->"91fb161b-5dce-406a-aecd-ae3d80998eab"],
Cell[3284, 81, 808, 11, 189, "Output",ExpressionUUID->"ad3a72df-8087-446c-98d8-b08bac0a33f3"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[4141, 98, 256, 4, 54, "Subsection",ExpressionUUID->"ed662794-d15b-4021-b8ac-3098aa727253"],
Cell[CellGroupData[{
Cell[4422, 106, 261, 5, 44, "Input",ExpressionUUID->"d7e8c893-1654-47c0-b548-8e392592ce58"],
Cell[4686, 113, 224, 3, 72, "Output",ExpressionUUID->"725e8c6e-e2d9-46a7-a5d2-58f83afa3b0d"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4947, 121, 394, 8, 44, "Input",ExpressionUUID->"d05ecc98-475c-48cf-ab86-98834791c2c9"],
Cell[5344, 131, 171, 2, 53, "Output",ExpressionUUID->"bff9ba76-f9aa-4399-9fb8-4495b1e9352e"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5552, 138, 335, 6, 44, "Input",ExpressionUUID->"2cd38d4b-9238-4ccb-b79e-cf64a09bb8e7"],
Cell[5890, 146, 169, 2, 53, "Output",ExpressionUUID->"33890a0d-c8ed-4044-8057-f25cd4333709"]
}, Open  ]],
Cell[CellGroupData[{
Cell[6096, 153, 347, 7, 45, "Input",ExpressionUUID->"87788ee5-ad2e-45db-870c-a8fbef8a1783"],
Cell[6446, 162, 170, 2, 52, "Output",ExpressionUUID->"9ddeb49c-81e8-4213-b7ea-70d62da4abb3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[6653, 169, 341, 7, 45, "Input",ExpressionUUID->"be940f90-2a5b-4129-b47a-0aaee96556db"],
Cell[6997, 178, 169, 2, 52, "Output",ExpressionUUID->"86ed9995-a518-46bb-9e8c-b8f4cfbc434c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[7203, 185, 669, 12, 66, "Input",ExpressionUUID->"70ec78ce-9c85-426e-873c-c7ef4abee7c9"],
Cell[7875, 199, 458, 6, 52, "Output",ExpressionUUID->"7523f11c-50cd-4d14-a226-826a28daab22"]
}, Open  ]],
Cell[CellGroupData[{
Cell[8370, 210, 1559, 39, 233, "Input",ExpressionUUID->"28e772b4-5760-47c4-b1f4-7e74d36f01cb"],
Cell[9932, 251, 327, 6, 32, "Output",ExpressionUUID->"bd9a34a3-2b6e-4c17-905a-f654f8bccab2"]
}, Open  ]],
Cell[10274, 260, 342, 5, 34, "Text",ExpressionUUID->"0442d02d-cf60-42c7-8d28-4e441f60720e"]
}, Open  ]]
}
]
*)

