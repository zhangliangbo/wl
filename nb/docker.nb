(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     13780,        340]
NotebookOptionsPosition[     10966,        278]
NotebookOutlinePosition[     11323,        294]
CellTagsIndexPosition[     11280,        291]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["\:6e05\:7a7a\:6240\:6709\:7684\:65e0\:7528\:5bb9\:5668", "Subsection",
 CellChangeTimes->{{3.7988589557622128`*^9, 
  3.7988589637102127`*^9}},ExpressionUUID->"b0a05e52-7bfb-478a-b02e-\
445384c2961d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{"StringSplit", "[", "\"\<docker.exe container prune -f\>\"", "]"}],
    ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.798858941868696*^9, 3.798858953020213*^9}, {
   3.7988589996102123`*^9, 3.7988590492427497`*^9}, 3.7988591167967687`*^9, 
   3.798859211451966*^9, {3.7988592423989663`*^9, 3.798859266436694*^9}},
 CellLabel->"In[12]:=",ExpressionUUID->"714ed0d7-e6cf-41aa-b679-1921afc0c835"],

Cell[BoxData["\<\"Deleted \
Containers:\\\
nb0db86fbd709cac7f4d0727b961c2f48e697b2b18ab69b187e77b37f68b503ac\\\
n87fac63fb51a0820f5ae2a3cca9451a6b71a4b181559b97a446a841a25d8ea3d\\\
nec274ed04f92ca2f2d7ff9cfe3670b046202208770f53732fec640f152eecf9c\\\
n08d73a0136e43cb0d04c3ab8b95644d7e92c3b7fb6a11c319ece0fee27d6e776\\\
nb5b74d276200a5ba0b301080ad3c56532b7dc4ba3867f2193bf72421306e5291\\\
n72b1e5724decf62853dfeb85a87f5bdac7e26d223f0858381b3657ffb01f366a\\\
ne8ba2e9ecb266b20f49375e11ef43ce7342b5907b07c6fb3742ee42c132da058\\\
n2b30c7122205f15e761bee548691730491b24004544c44e831825c8ae59529bf\\\
n94359a946c07d504a85e9f4c58c3e9c1113748ddb37dab8295b220fd746eb285\\\
n43f2ad08618fe1cb819eb3f7f3f07280be915e8da5d0b130c9ac822f5f0782c0\\n\\nTotal \
reclaimed space: 2.566MB\\n\"\>"], "Output",
 CellChangeTimes->{3.7988592881296816`*^9, 3.7989326805682983`*^9, 
  3.7993567812250333`*^9, 3.799360328768145*^9, 3.8000629254699907`*^9, 
  3.8000643132262096`*^9, 3.800066018081689*^9, 3.800075793117128*^9, 
  3.800337037846274*^9},
 CellLabel->"Out[12]=",ExpressionUUID->"2bf80c2d-315a-48a5-8d17-d62d30564a85"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\:5217\:51fa\:6240\:6709\:7684\:670d\:52a1\:6808", "Subsection",
 CellChangeTimes->{{3.7988593100846677`*^9, 
  3.7988593340588293`*^9}},ExpressionUUID->"108cdecb-8ac8-4ee6-bb07-\
62f384495b59"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{"StringSplit", "[", "\"\<docker.exe stack ls\>\"", "]"}], ",", 
   "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.798858941868696*^9, 3.798858953020213*^9}, {
   3.7988589996102123`*^9, 3.7988590492427497`*^9}, 3.7988591167967687`*^9, 
   3.798859211451966*^9, {3.7988592423989663`*^9, 3.7988592970076666`*^9}},
 CellLabel->"In[20]:=",ExpressionUUID->"91fb161b-5dce-406a-aecd-ae3d80998eab"],

Cell[BoxData["\<\"NAME                SERVICES            ORCHESTRATOR\\nbb   \
               1                   Swarm\\nmn                  1              \
     Swarm\\nmongo               2                   Swarm\\nmysql            \
   1                   Swarm\\nnexus               1                   \
Swarm\\nrabbitmq            1                   Swarm\\nredis               1 \
                  Swarm\\n\"\>"], "Output",
 CellChangeTimes->{
  3.7988589664532366`*^9, 3.7988590057152424`*^9, 3.7988590496747503`*^9, 
   3.798859117682764*^9, 3.798859214688966*^9, {3.7988592676526957`*^9, 
   3.798859298032668*^9}, 3.798859338173833*^9, 3.798941196283867*^9, {
   3.7989431634975815`*^9, 3.7989431684175844`*^9}},
 CellLabel->"Out[20]=",ExpressionUUID->"ad3a72df-8087-446c-98d8-b08bac0a33f3"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["mongo", "Subsection",
 CellChangeTimes->{{3.7988593100846677`*^9, 3.7988593340588293`*^9}, {
  3.7989431134988346`*^9, 3.798943152809583*^9}, {3.798943632698332*^9, 
  3.7989436328593316`*^9}},ExpressionUUID->"ed662794-d15b-4021-b8ac-\
3098aa727253"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{"StringSplit", "[", "\"\<docker.exe stack rm mongo\>\"", "]"}], 
   ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellLabel->"In[29]:=",ExpressionUUID->"d7e8c893-1654-47c0-b548-8e392592ce58"],

Cell[BoxData["\<\"Removing service mongo_express\\nRemoving service \
mongo_mongo\\n\"\>"], "Output",
 CellChangeTimes->{3.7989436451968427`*^9},
 CellLabel->"Out[29]=",ExpressionUUID->"725e8c6e-e2d9-46a7-a5d2-58f83afa3b0d"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{
   "StringSplit", "[", "\"\<docker.exe volume rm mongo-config\>\"", "]"}], 
   ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7989433263959637`*^9, 3.7989433286780005`*^9}, {
  3.798943383130349*^9, 3.7989434419578934`*^9}},
 CellLabel->"In[24]:=",ExpressionUUID->"d05ecc98-475c-48cf-ab86-98834791c2c9"],

Cell[BoxData["\<\"mongo-config\\n\"\>"], "Output",
 CellChangeTimes->{3.798943456172858*^9},
 CellLabel->"Out[24]=",ExpressionUUID->"bff9ba76-f9aa-4399-9fb8-4495b1e9352e"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{"StringSplit", "[", "\"\<docker.exe volume rm mongo-db\>\"", "]"}],
    ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7989434516738844`*^9, 3.7989434519019003`*^9}},
 CellLabel->"In[25]:=",ExpressionUUID->"2cd38d4b-9238-4ccb-b79e-cf64a09bb8e7"],

Cell[BoxData["\<\"mongo-db\\n\"\>"], "Output",
 CellChangeTimes->{3.7989434591491585`*^9},
 CellLabel->"Out[25]=",ExpressionUUID->"33890a0d-c8ed-4044-8057-f25cd4333709"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{
   "StringSplit", "[", "\"\<docker.exe volume create mongo-config\>\"", "]"}],
    ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7989434708501596`*^9, 3.7989434716111593`*^9}},
 CellLabel->"In[26]:=",ExpressionUUID->"87788ee5-ad2e-45db-870c-a8fbef8a1783"],

Cell[BoxData["\<\"mongo-config\\n\"\>"], "Output",
 CellChangeTimes->{3.79894347821716*^9},
 CellLabel->"Out[26]=",ExpressionUUID->"9ddeb49c-81e8-4213-b7ea-70d62da4abb3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{
   "StringSplit", "[", "\"\<docker.exe volume create mongo-db\>\"", "]"}], 
   ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.7989434729541597`*^9, 3.798943475172159*^9}},
 CellLabel->"In[27]:=",ExpressionUUID->"be940f90-2a5b-4129-b47a-0aaee96556db"],

Cell[BoxData["\<\"mongo-db\\n\"\>"], "Output",
 CellChangeTimes->{3.7989434801824446`*^9},
 CellLabel->"Out[27]=",ExpressionUUID->"86ed9995-a518-46bb-9e8c-b8f4cfbc434c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"RunProcess", "[", 
  RowBox[{
   RowBox[{
   "StringSplit", "[", 
    "\"\<docker.exe stack deploy -c C:\\\\docker\\\\mongo.yml mongo\>\"", 
    "]"}], ",", "\"\<StandardOutput\>\""}], "]"}]], "Input",
 CellChangeTimes->{{3.798858941868696*^9, 3.798858953020213*^9}, {
   3.7988589996102123`*^9, 3.7988590492427497`*^9}, 3.7988591167967687`*^9, 
   3.798859211451966*^9, {3.7988592423989663`*^9, 3.7988592970076666`*^9}, {
   3.798943128801836*^9, 3.798943133483836*^9}, {3.798943177533121*^9, 
   3.79894317955834*^9}, {3.798943346666539*^9, 3.798943377091362*^9}},
 CellLabel->"In[30]:=",ExpressionUUID->"70ec78ce-9c85-426e-873c-c7ef4abee7c9"],

Cell[BoxData["\<\"Creating service mongo_mongo\\n\"\>"], "Output",
 CellChangeTimes->{
  3.7988589664532366`*^9, 3.7988590057152424`*^9, 3.7988590496747503`*^9, 
   3.798859117682764*^9, 3.798859214688966*^9, {3.7988592676526957`*^9, 
   3.798859298032668*^9}, 3.798859338173833*^9, 3.798941196283867*^9, 
   3.7989431348308353`*^9, 3.7989435064934444`*^9, 3.798943692550217*^9},
 CellLabel->"Out[30]=",ExpressionUUID->"7523f11c-50cd-4d14-a226-826a28daab22"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["\:6253\:5f00mongo\:5bb9\:5668", "Subsection",
 CellChangeTimes->{{3.798949090421733*^9, 
  3.798949096247732*^9}},ExpressionUUID->"f9bf6763-a7f1-436a-95a1-\
ceca3db567c7"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Run", "[", 
  RowBox[{"\"\<docker.exe exec -it \>\"", "<>", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"RunProcess", "[", 
           RowBox[{
            RowBox[{"StringSplit", "[", "\"\<docker.exe ps\>\"", "]"}], ",", 
            "\"\<StandardOutput\>\""}], "]"}], "//", 
          RowBox[{
           RowBox[{"StringCases", "[", 
            RowBox[{"#", ",", 
             RowBox[{
              RowBox[{"\"\<\\n\>\"", "~~", 
               RowBox[{"x", ":", 
                RowBox[{"WordCharacter", ".."}]}], "~~", "Whitespace", "~~", 
               "\"\<mongo:latest\>\""}], "\[RuleDelayed]", 
              RowBox[{"StringTrim", "[", "x", "]"}]}]}], "]"}], "&"}]}], "//",
          "First"}], "//", 
        RowBox[{
         RowBox[{"RunProcess", "[", 
          RowBox[{
           RowBox[{"StringSplit", "[", 
            RowBox[{"\"\<docker.exe inspect \>\"", "<>", "#"}], "]"}], ",", 
           "\"\<StandardOutput\>\""}], "]"}], "&"}]}], "//", 
       RowBox[{
        RowBox[{"ImportString", "[", 
         RowBox[{"#", ",", "\"\<RawJSON\>\""}], "]"}], "&"}]}], "//", 
      RowBox[{
       RowBox[{"Lookup", "[", 
        RowBox[{"#", ",", "\"\<Id\>\""}], "]"}], "&"}]}], "//", "First"}], 
    ")"}], "<>", "\"\< mongo -u root -p civic\>\""}], "\[IndentingNewLine]", 
  "]"}]], "Input",
 CellChangeTimes->{{3.798945838024805*^9, 3.7989458531097803`*^9}, {
   3.79894640578961*^9, 3.7989464513884325`*^9}, {3.7989464837994313`*^9, 
   3.7989465010454893`*^9}, {3.7990144332794*^9, 3.7990144366454024`*^9}, 
   3.799015249978775*^9},
 CellLabel->"In[18]:=",ExpressionUUID->"28e772b4-5760-47c4-b1f4-7e74d36f01cb"],

Cell[BoxData[
 RowBox[{"-", "1073741510"}]], "Output",
 CellChangeTimes->{
  3.7989458649897804`*^9, 3.7989464090075912`*^9, 3.798946454917431*^9, {
   3.79894649246143*^9, 3.7989464932874904`*^9}, {3.798948095786974*^9, 
   3.798948107071488*^9}, 3.7989483352704782`*^9, 3.798949064303732*^9, 
   3.799015278729745*^9},
 CellLabel->"Out[18]=",ExpressionUUID->"0d096b34-d793-46d1-b747-999a92339780"]
}, Open  ]],

Cell["db.createUser({user:\[CloseCurlyDoubleQuote]xxl\[CloseCurlyDoubleQuote],\
pwd:\[CloseCurlyDoubleQuote]civic\[CloseCurlyDoubleQuote],roles:[\
\[OpenCurlyDoubleQuote]readWrite\[CloseCurlyDoubleQuote]]})", "Text",
 CellChangeTimes->{{3.798947993620998*^9, 
  3.798948077382001*^9}},ExpressionUUID->"0442d02d-cf60-42c7-8d28-\
4e441f60720e"]
}, Open  ]]
},
WindowSize->{744, 758},
WindowMargins->{{Automatic, 416}, {68, Automatic}},
FrontEndVersion->"12.0 for Microsoft Windows (64-bit) (2019\:5e745\:670818\
\:65e5)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 206, 3, 53, "Subsection",ExpressionUUID->"b0a05e52-7bfb-478a-b02e-445384c2961d"],
Cell[CellGroupData[{
Cell[811, 29, 483, 8, 45, "Input",ExpressionUUID->"714ed0d7-e6cf-41aa-b679-1921afc0c835"],
Cell[1297, 39, 1103, 17, 312, "Output",ExpressionUUID->"2bf80c2d-315a-48a5-8d17-d62d30564a85"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[2449, 62, 200, 3, 53, "Subsection",ExpressionUUID->"108cdecb-8ac8-4ee6-bb07-62f384495b59"],
Cell[CellGroupData[{
Cell[2674, 69, 475, 8, 45, "Input",ExpressionUUID->"91fb161b-5dce-406a-aecd-ae3d80998eab"],
Cell[3152, 79, 808, 11, 185, "Output",ExpressionUUID->"ad3a72df-8087-446c-98d8-b08bac0a33f3"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[4009, 96, 256, 4, 53, "Subsection",ExpressionUUID->"ed662794-d15b-4021-b8ac-3098aa727253"],
Cell[CellGroupData[{
Cell[4290, 104, 261, 5, 45, "Input",ExpressionUUID->"d7e8c893-1654-47c0-b548-8e392592ce58"],
Cell[4554, 111, 224, 3, 71, "Output",ExpressionUUID->"725e8c6e-e2d9-46a7-a5d2-58f83afa3b0d"]
}, Open  ]],
Cell[CellGroupData[{
Cell[4815, 119, 394, 8, 45, "Input",ExpressionUUID->"d05ecc98-475c-48cf-ab86-98834791c2c9"],
Cell[5212, 129, 171, 2, 52, "Output",ExpressionUUID->"bff9ba76-f9aa-4399-9fb8-4495b1e9352e"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5420, 136, 335, 6, 45, "Input",ExpressionUUID->"2cd38d4b-9238-4ccb-b79e-cf64a09bb8e7"],
Cell[5758, 144, 169, 2, 52, "Output",ExpressionUUID->"33890a0d-c8ed-4044-8057-f25cd4333709"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5964, 151, 347, 7, 45, "Input",ExpressionUUID->"87788ee5-ad2e-45db-870c-a8fbef8a1783"],
Cell[6314, 160, 170, 2, 52, "Output",ExpressionUUID->"9ddeb49c-81e8-4213-b7ea-70d62da4abb3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[6521, 167, 341, 7, 45, "Input",ExpressionUUID->"be940f90-2a5b-4129-b47a-0aaee96556db"],
Cell[6865, 176, 169, 2, 52, "Output",ExpressionUUID->"86ed9995-a518-46bb-9e8c-b8f4cfbc434c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[7071, 183, 669, 12, 66, "Input",ExpressionUUID->"70ec78ce-9c85-426e-873c-c7ef4abee7c9"],
Cell[7743, 197, 458, 6, 52, "Output",ExpressionUUID->"7523f11c-50cd-4d14-a226-826a28daab22"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[8250, 209, 177, 3, 53, "Subsection",ExpressionUUID->"f9bf6763-a7f1-436a-95a1-ceca3db567c7"],
Cell[CellGroupData[{
Cell[8452, 216, 1739, 42, 270, "Input",ExpressionUUID->"28e772b4-5760-47c4-b1f4-7e74d36f01cb"],
Cell[10194, 260, 399, 7, 32, "Output",ExpressionUUID->"0d096b34-d793-46d1-b747-999a92339780"]
}, Open  ]],
Cell[10608, 270, 342, 5, 34, "Text",ExpressionUUID->"0442d02d-cf60-42c7-8d28-4e441f60720e"]
}, Open  ]]
}
]
*)

